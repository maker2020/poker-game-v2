# 斗地主小程序开发需求说明

仍处于集思广益阶段，这是一个初步、简单、暂定的**开发**需求说明。

## 简单说明

按照客户端/服务器特点来划分。

### 客户端、服务器协调

1. 微信用户授权取得用户信息（包含唯一标识name/id)。
2. 游戏系统数据持久化到数据库。
    - 用户信息：微信账号相关、游戏道具货币等信息。
    - 游戏系统：游戏道具等。
    - ......
    - (待补全)
3. 游戏互动(表情、固定聊天语录)。
4. 广告植入（结合道具奖励）。
5. 游戏热更新。

### 客户端

1. 单机模式的开发（含联机托管）。
2. 游戏音效加入。

### 服务器

1. 游戏断连重连机制。
2. 安全要求（涉及面较广）。
3. 内存清理优化。

## 三高要求

高并发、高性能、高可靠。

数据量上来后，考虑分布式系统常用的并发组件。

1. RabbitMQ(中转生产者的消息，削峰填谷)
2. 数据库主从+集群+读写分离(可靠+高性能)
3. Netty进阶使用(三高)

## 安全性

1. 接口安全性:
由于小程序类似浏览器的web服务等技术，它也可以被查看源码。接口的安全性必须通过token认证、敏感数据必须加密、有效利用微信云函数(参数cloudID)。

2. 后端数据校验的严谨性。

## 具体说明

- 场上倍数规则:
    1. 炸弹翻倍
    2. 地主牌同花顺翻倍
    3. 地主牌大小王任意一张翻倍
    4. 抢地主翻倍
